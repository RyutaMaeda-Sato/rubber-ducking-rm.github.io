<!DOCTYPE html><html lang="jp" class="__variable_f367f3 __variable_8c8862 __variable_6beb74 __variable_b784c9 __variable_d575de"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/40e00024f5837e45-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="preload" href="/_next/static/media/8b506003a59c61f9-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/e1217b6673f6c7e5-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="preload" href="/_next/static/media/e1a9950d37b1ef3e-s.p.ttf" as="font" crossorigin="" type="font/ttf"/><link rel="preload" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/3add334ee59f67ac.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/cec3dd424af6abe7.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/31924b81bd2c71c2.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bc770cab82f23445.js"/><script src="/_next/static/chunks/fd9d1056-601e117eccba8914.js" async=""></script><script src="/_next/static/chunks/117-6de7df87bc7c7a2a.js" async=""></script><script src="/_next/static/chunks/main-app-3c6d331f653aef5c.js" async=""></script><script src="/_next/static/chunks/972-f241a8fd644428c6.js" async=""></script><script src="/_next/static/chunks/70-f52c2ad284c6cd86.js" async=""></script><script src="/_next/static/chunks/app/layout-97d049cf0fc78146.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bslug%5D/page-acd6669982df1354.js" async=""></script><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-FWRP8962MB" as="script"/><title>Unityのシングルトンパターン | ブログタイトル</title><meta name="description" content="Unity開発者のための効率的なシングルトンパターンの実装方法と実践的なエラー対策"/><meta property="og:title" content="Unityのシングルトンパターン"/><meta property="og:description" content="Unity開発者のための効率的なシングルトンパターンの実装方法と実践的なエラー対策"/><meta property="og:url" content="https://maemaemae.blog/posts/unity_20250330"/><meta property="og:image" content="https://maemaemae.blog/images/unity-singleton.jpg"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-03-30"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Unityのシングルトンパターン"/><meta name="twitter:description" content="Unity開発者のための効率的なシングルトンパターンの実装方法と実践的なエラー対策"/><meta name="twitter:image" content="https://maemaemae.blog/images/unity-singleton.jpg"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script>(function(){try{var s=localStorage.getItem('darkMode');var p=window.matchMedia('(prefers-color-scheme: dark)').matches;if(s!==null?s==='true':p){document.documentElement.classList.add('dark');}}catch(e){}})();</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_f367f3"><header><div class="fixed top-0 left-0 w-full z-50 bg-green-700 dark:bg-gray-900 shadow-md border-b border-green-600/50 dark:border-gray-800" style="transform:translateY(0);transition:transform 300ms ease-in-out"><div class="max-w-7xl mx-auto"><div class="flex items-center justify-between px-6 md:px-8 h-20 md:h-24"><a class="group flex items-center gap-3 transition-opacity hover:opacity-80" href="/"><img alt="Maemaemae" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="rounded-full object-cover ring-2 ring-white/20 group-hover:ring-white/40 transition-all" style="color:transparent" src="/header.jpg"/><span class="text-xl md:text-2xl font-katyou text-[#fffef9] tracking-wide">Maemaemae</span></a><div class="flex items-center gap-2"><a href="https://x.com/maemaemae_rm" target="_blank" rel="noopener noreferrer" class="p-2.5 rounded-full hover:bg-white/10 transition-colors" aria-label="X (Twitter)"><img alt="" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" style="color:transparent" src="/x-logo-white.png"/></a><button class="p-2.5 rounded-full text-[#fffef9] bg-white/5 hover:bg-white/15 ring-2 ring-transparent hover:ring-white/20 transition-all duration-200" aria-label="ダークモードに切り替え"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path></svg></button></div></div></div></div></header><article class="min-h-screen"><div class="bg-gradient-to-b from-green-50/60 to-transparent dark:from-gray-900 dark:to-transparent"><div class="max-w-4xl mx-auto px-6 md:px-8 pt-28 md:pt-32 pb-10 md:pb-14"><h1 class="font-katyou text-4xl md:text-5xl lg:text-6xl text-gray-900 dark:text-white leading-tight mb-6">Unityのシングルトンパターン</h1><time class="text-base font-medium text-gray-600 dark:text-gray-400">2025-03-30</time></div></div><div class="max-w-4xl mx-auto px-6 md:px-8 pb-16 md:pb-24"><div id="post-content" class="prose prose-lg dark:prose-invert max-w-none prose-headings:font-katyou prose-headings:tracking-tight prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-6 prose-h3:text-2xl prose-h3:mt-10 prose-h3:mb-5 prose-h4:text-xl prose-h4:mt-8 prose-h4:mb-4 prose-p:leading-relaxed prose-p:mb-6 prose-li:my-2 prose-a:text-green-600 prose-a:no-underline prose-a:font-medium hover:prose-a:text-green-700 hover:prose-a:underline dark:prose-a:text-green-400 dark:hover:prose-a:text-green-300 prose-code:text-green-700 prose-code:bg-green-50 dark:prose-code:text-green-300 dark:prose-code:bg-green-900/20 prose-pre:bg-gray-900 dark:prose-pre:bg-gray-950 prose-img:rounded-lg prose-img:shadow-md prose-hr:my-12 prose-hr:border-gray-300 dark:prose-hr:border-gray-700 border-t border-gray-200 dark:border-gray-800 pt-8"><p>Unityプロジェクトでは、ゲーム状態の管理、オーディオの制御、入力処理など、アプリケーション全体で一貫して利用できる機能が必要になります。このような場合に役立つのが「シングルトンパターン」です。この記事では、Unityでのシングルトンパターンの実装方法、よくあるエラーとその対策、実践的な使用例について解説します。</p>
<h2>シングルトンパターンとは</h2>
<p>シングルトンパターンは、クラスのインスタンスが必ず1つだけ存在することを保証し、そのインスタンスへのグローバルなアクセスポイントを提供するデザインパターンです。ゲーム開発においては、以下のような場面で特に有用です：</p>
<ul>
<li>ゲーム全体の状態管理（GameManager）</li>
<li>オーディオ管理（AudioManager）</li>
<li>入力制御（InputManager）</li>
<li>セーブデータ管理（SaveManager）</li>
<li>UIシステム（UIManager）</li>
</ul>
<h2>基本的なシングルトン実装</h2>
<p>Unityでの最も基本的なシングルトン実装は以下の通りです：</p>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 静的インスタンス参照</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">GameManager</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 公開アクセスポイント</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">GameManager</span> Instance
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">get</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">{</span>
</span><span class="code-line">                Debug<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span><span class="token string">"GameManager is not available!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token punctuation">}</span>
</span><span class="code-line">            <span class="token keyword">return</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token comment">// シングルトンの初期化</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            _instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// シーン遷移時も破棄しない</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token keyword">else</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token comment">// 既に存在する場合は重複を破棄</span>
</span><span class="code-line">            <span class="token function">Destroy</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>この基本実装では：</p>
<ol>
<li>静的変数 <code>_instance</code> がクラスのインスタンスを保持</li>
<li><code>Instance</code> プロパティが外部からのアクセスポイントになる</li>
<li><code>Awake()</code> メソッドでインスタンスの一意性を確保</li>
<li><code>DontDestroyOnLoad()</code> でシーン遷移時もインスタンスを維持</li>
</ol>
<h2>発展的なシングルトン実装</h2>
<h3>自動生成機能を持つシングルトン</h3>
<p>シングルトンが存在しない場合に自動的に生成する機能を追加した実装です：</p>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AudioManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">AudioManager</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">AudioManager</span> Instance
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">get</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token comment">// インスタンスがなければ自動生成</span>
</span><span class="code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token class-name">GameObject</span> go <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameObject</span><span class="token punctuation">(</span><span class="token string">"AudioManager"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">                _instance <span class="token operator">=</span> go<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddComponent</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>AudioManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">                <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span>go<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token punctuation">}</span>
</span><span class="code-line">            <span class="token keyword">return</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            _instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token function">Destroy</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token comment">// 初期化処理...</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3>汎用的なシングルトン基底クラス</h3>
<p>複数のマネージャークラスで再利用できるジェネリックな基底クラスを作成することで、コードの重複を避けられます：</p>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Singleton<span class="token punctuation">&#x3C;</span>T<span class="token punctuation">></span></span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">T</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">T</span> Instance
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">get</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token comment">// シーン内のインスタンスを検索</span>
</span><span class="code-line">                _instance <span class="token operator">=</span> <span class="token generic-method"><span class="token function">FindObjectOfType</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">                <span class="token comment">// 見つからなければ新規作成</span>
</span><span class="code-line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">                <span class="token punctuation">{</span>
</span><span class="code-line">                    <span class="token class-name">GameObject</span> go <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameObject</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">                    _instance <span class="token operator">=</span> go<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddComponent</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">                <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">                <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span>_instance<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token punctuation">}</span>
</span><span class="code-line">            <span class="token keyword">return</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">protected</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            _instance <span class="token operator">=</span> <span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token class-name">T</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token function">Destroy</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 使用例</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UIManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Singleton<span class="token punctuation">&#x3C;</span>UIManager<span class="token punctuation">></span></span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// UIManagerの固有メソッドや変数</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ShowMainMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"メインメニューを表示"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token comment">// UIManagerの初期化処理</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h2>よくあるNullReferenceExceptionとその対策</h2>
<p>シングルトンパターンを使用する際によく発生するのが <code>NullReferenceException</code> です。特に以下のケースに注意が必要です：</p>
<h3>1. 初期化タイミングの問題</h3>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token comment">// エラーの例</span>
</span><span class="code-line"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// GameManagerが初期化される前にアクセスするとエラー</span>
</span><span class="code-line">    GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">StartGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 安全な実装</span>
</span><span class="code-line"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>GameManager<span class="token punctuation">.</span>Instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">StartGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword">else</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        Debug<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token string">"GameManagerが初期化されていません"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token comment">// 代替処理...</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3>2. シングルトン間の依存関係によるエラー</h3>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token comment">// 問題のあるコード</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SaveManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SaveManager</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">SaveManager</span> Instance <span class="token operator">=></span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        _instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token comment">// GameManagerが初期化されていない可能性がある</span>
</span><span class="code-line">        GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">RegisterSaveSystem</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 改善策</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SaveManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SaveManager</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">SaveManager</span> Instance <span class="token operator">=></span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        _instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token comment">// Startメソッドは全てのAwakeの後に呼ばれる</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>GameManager<span class="token punctuation">.</span>Instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">RegisterSaveSystem</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3>3. シーン遷移時の問題</h3>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token comment">// よくある間違い</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InputManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">InputManager</span> Instance <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>Instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            Instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token comment">// DontDestroyOnLoadを忘れると</span>
</span><span class="code-line">            <span class="token comment">// シーン遷移時にInstanceがnullになる</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token keyword">else</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token function">Destroy</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 正しい実装</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InputManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">InputManager</span> Instance <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>Instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            Instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重要</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token keyword">else</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token function">Destroy</span><span class="token punctuation">(</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h2>実践的なエラー対策テクニック</h2>
<h3>シングルトン存在チェックメソッド</h3>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">GameManager</span> Instance <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// シングルトンの存在確認メソッド</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">HasInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">return</span> Instance <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 安全にアクセスするメソッド</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">GameManager</span> <span class="token function">GetSafeInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>Instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            Debug<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token string">"GameManagerのインスタンスが利用できません"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token comment">// 必要に応じて新規作成</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token keyword">return</span> Instance<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 使用例</span>
</span><span class="code-line"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>GameManager<span class="token punctuation">.</span><span class="token function">HasInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        GameManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">ProcessAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3>初期化順序の制御</h3>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameInitializer</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token comment">// シングルトンの初期化順序を明示的に制御</span>
</span><span class="code-line">        <span class="token generic-method"><span class="token function">CreateSingleton</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>GameManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token generic-method"><span class="token function">CreateSingleton</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>AudioManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token generic-method"><span class="token function">CreateSingleton</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>UIManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token generic-method"><span class="token function">CreateSingleton</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>SaveManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token generic-method"><span class="token function">CreateSingleton</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token generic-method"><span class="token function">FindObjectOfType</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token class-name">GameObject</span> go <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameObject</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            go<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddComponent</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span>go<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3>Lazy Initialization（遅延初期化）の安全な実装</h3>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ResourceManager</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">object</span></span> _lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">object</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">bool</span></span> _isInitializing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">ResourceManager</span> Instance
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">get</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&#x26;&#x26;</span> <span class="token operator">!</span>_isInitializing<span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token keyword">lock</span> <span class="token punctuation">(</span>_lock<span class="token punctuation">)</span>
</span><span class="code-line">                <span class="token punctuation">{</span>
</span><span class="code-line">                    <span class="token keyword">if</span> <span class="token punctuation">(</span>_instance <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&#x26;&#x26;</span> <span class="token operator">!</span>_isInitializing<span class="token punctuation">)</span>
</span><span class="code-line">                    <span class="token punctuation">{</span>
</span><span class="code-line">                        _isInitializing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">                        <span class="token class-name">GameObject</span> go <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GameObject</span><span class="token punctuation">(</span><span class="token string">"ResourceManager"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">                        _instance <span class="token operator">=</span> go<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddComponent</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>ResourceManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">                        <span class="token function">DontDestroyOnLoad</span><span class="token punctuation">(</span>go<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">                        _isInitializing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</span><span class="code-line">                    <span class="token punctuation">}</span>
</span><span class="code-line">                <span class="token punctuation">}</span>
</span><span class="code-line">            <span class="token punctuation">}</span>
</span><span class="code-line">            <span class="token keyword">return</span> _instance<span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h2>実用的なシングルトン実装例</h2>
<h3>ゲームマネージャー</h3>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Singleton<span class="token punctuation">&#x3C;</span>GameManager<span class="token punctuation">></span></span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// ゲーム状態</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">GameState</span> <span class="token punctuation">{</span> MainMenu<span class="token punctuation">,</span> Playing<span class="token punctuation">,</span> Paused<span class="token punctuation">,</span> GameOver <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token class-name">GameState</span> _currentState<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 公開プロパティ</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name">GameState</span> CurrentState
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">get</span> <span class="token operator">=></span> _currentState<span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">private</span> <span class="token keyword">set</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            _currentState <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
</span><span class="code-line">            OnGameStateChanged<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>_currentState<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// ゲーム状態変更イベント</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">event</span> <span class="token class-name">System<span class="token punctuation">.</span>Action<span class="token punctuation">&#x3C;</span>GameState<span class="token punctuation">></span></span> OnGameStateChanged<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// スコア管理</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">int</span></span> _score<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Score
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">get</span> <span class="token operator">=></span> _score<span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">set</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            _score <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
</span><span class="code-line">            OnScoreChanged<span class="token punctuation">?.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>_score<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token keyword">event</span> <span class="token class-name">System<span class="token punctuation">.</span>Action<span class="token punctuation">&#x3C;</span><span class="token keyword">int</span><span class="token punctuation">></span></span> OnScoreChanged<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// ゲーム開始</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">StartGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        Score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line">        CurrentState <span class="token operator">=</span> GameState<span class="token punctuation">.</span>Playing<span class="token punctuation">;</span>
</span><span class="code-line">        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"ゲーム開始"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// ゲーム一時停止</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PauseGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>CurrentState <span class="token operator">==</span> GameState<span class="token punctuation">.</span>Playing<span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            CurrentState <span class="token operator">=</span> GameState<span class="token punctuation">.</span>Paused<span class="token punctuation">;</span>
</span><span class="code-line">            Time<span class="token punctuation">.</span>timeScale <span class="token operator">=</span> <span class="token number">0f</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>CurrentState <span class="token operator">==</span> GameState<span class="token punctuation">.</span>Paused<span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            CurrentState <span class="token operator">=</span> GameState<span class="token punctuation">.</span>Playing<span class="token punctuation">;</span>
</span><span class="code-line">            Time<span class="token punctuation">.</span>timeScale <span class="token operator">=</span> <span class="token number">1f</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// ゲームオーバー</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">GameOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        CurrentState <span class="token operator">=</span> GameState<span class="token punctuation">.</span>GameOver<span class="token punctuation">;</span>
</span><span class="code-line">        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"ゲームオーバー、最終スコア: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Score</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3>オーディオマネージャー</h3>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AudioManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Singleton<span class="token punctuation">&#x3C;</span>AudioManager<span class="token punctuation">></span></span></span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 音楽再生用</span>
</span><span class="code-line">    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name">AudioSource</span> musicSource<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// 効果音再生用</span>
</span><span class="code-line">    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span> <span class="token keyword">private</span> <span class="token class-name">AudioSource</span> sfxSource<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 音楽クリップディクショナリ</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token class-name">Dictionary<span class="token punctuation">&#x3C;</span><span class="token keyword">string</span><span class="token punctuation">,</span> AudioClip<span class="token punctuation">></span></span> musicClips <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&#x3C;</span><span class="token keyword">string</span><span class="token punctuation">,</span> AudioClip<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// 効果音クリップディクショナリ</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token class-name">Dictionary<span class="token punctuation">&#x3C;</span><span class="token keyword">string</span><span class="token punctuation">,</span> AudioClip<span class="token punctuation">></span></span> sfxClips <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Dictionary<span class="token punctuation">&#x3C;</span><span class="token keyword">string</span><span class="token punctuation">,</span> AudioClip<span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Awake</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token comment">// AudioSourceがない場合は追加</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>musicSource <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            musicSource <span class="token operator">=</span> gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddComponent</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>AudioSource<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            musicSource<span class="token punctuation">.</span>loop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>sfxSource <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            sfxSource <span class="token operator">=</span> gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddComponent</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>AudioSource<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token comment">// 音楽と効果音を読み込む</span>
</span><span class="code-line">        <span class="token function">LoadAudioClips</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LoadAudioClips</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token comment">// Resources/Audio/Musicフォルダから全ての音楽を読み込む</span>
</span><span class="code-line">        <span class="token class-name">AudioClip<span class="token punctuation">[</span><span class="token punctuation">]</span></span> loadedMusic <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAll</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>AudioClip<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"Audio/Music"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">AudioClip</span> clip <span class="token keyword">in</span> loadedMusic<span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            musicClips<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>clip<span class="token punctuation">.</span>name<span class="token punctuation">,</span> clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">        <span class="token comment">// Resources/Audio/SFXフォルダから全ての効果音を読み込む</span>
</span><span class="code-line">        <span class="token class-name">AudioClip<span class="token punctuation">[</span><span class="token punctuation">]</span></span> loadedSFX <span class="token operator">=</span> Resources<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAll</span><span class="token generic class-name"><span class="token punctuation">&#x3C;</span>AudioClip<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"Audio/SFX"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">AudioClip</span> clip <span class="token keyword">in</span> loadedSFX<span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            sfxClips<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>clip<span class="token punctuation">.</span>name<span class="token punctuation">,</span> clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"読み込み完了: 音楽 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">musicClips<span class="token punctuation">.</span>Count</span><span class="token punctuation">}</span></span><span class="token string">個, 効果音 </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">sfxClips<span class="token punctuation">.</span>Count</span><span class="token punctuation">}</span></span><span class="token string">個"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 音楽を再生</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PlayMusic</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>musicClips<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">AudioClip</span> clip<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            musicSource<span class="token punctuation">.</span>clip <span class="token operator">=</span> clip<span class="token punctuation">;</span>
</span><span class="code-line">            musicSource<span class="token punctuation">.</span><span class="token function">Play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token keyword">else</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            Debug<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"音楽 '</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">' が見つかりません"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 効果音を再生</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">PlaySFX</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>sfxClips<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">AudioClip</span> clip<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            sfxSource<span class="token punctuation">.</span><span class="token function">PlayOneShot</span><span class="token punctuation">(</span>clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token keyword">else</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">            Debug<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"効果音 '</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">name</span><span class="token punctuation">}</span></span><span class="token string">' が見つかりません"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 音量設定</span>
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetMusicVolume</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> volume<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        musicSource<span class="token punctuation">.</span>volume <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Clamp01</span><span class="token punctuation">(</span>volume<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetSFXVolume</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">float</span></span> volume<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">        sfxSource<span class="token punctuation">.</span>volume <span class="token operator">=</span> Mathf<span class="token punctuation">.</span><span class="token function">Clamp01</span><span class="token punctuation">(</span>volume<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h2>シングルトンパターンの注意点とベストプラクティス</h2>
<h3>使用する際の注意点</h3>
<ol>
<li>
<p><strong>過剰な使用を避ける</strong>: すべてのクラスをシングルトンにする誘惑に負けないようにしましょう。必要な場面でのみ使用しましょう。</p>
</li>
<li>
<p><strong>テスト難易度</strong>: シングルトンはユニットテストを難しくします。テスト可能性を高めるために依存性注入などの手法を検討しましょう。</p>
</li>
<li>
<p><strong>依存関係</strong>: シングルトン間の循環依存を避け、明確な初期化順序を設定しましょう。</p>
</li>
<li>
<p><strong>スレッドセーフティ</strong>: マルチスレッド環境では、適切な同期機構（lockなど）を使用しましょう。</p>
</li>
</ol>
<h3>ベストプラクティス</h3>
<ol>
<li>
<p><strong>専用のブートストラップシーン</strong>: すべてのシングルトンを初期化するための専用シーンを作成しましょう。</p>
</li>
<li>
<p><strong>初期化順序の制御</strong>: 依存関係のあるシングルトン間の初期化順序を明示的に制御しましょう。</p>
</li>
<li>
<p><strong>シングルトン間の通信方法</strong>: イベントベースの通信を採用して、シングルトン間の結合度を下げましょう。</p>
</li>
<li>
<p><strong>NullReferenceExceptionの対策</strong>: 常にnullチェックを行い、フォールバックや自動生成機能を実装しましょう。</p>
</li>
<li>
<p><strong>ドキュメント化</strong>: プロジェクト内のシングルトンの役割と責任範囲を明確に文書化しましょう。</p>
</li>
</ol>
<h2>まとめ</h2>
<p>Unityにおけるシングルトンパターンは、ゲーム全体で一貫して利用される機能を提供するための強力な手法です。この記事で紹介した実装方法とエラー対策テクニックを活用して、より堅牢なゲームアプリケーションを構築してください。</p>
<p>ただし、シングルトンパターンの使用は適材適所で行い、過剰な依存を作り出さないよう注意しましょう。適切に実装されたシングルトンは、コードの可読性と保守性を高め、開発効率を向上させる強力なツールとなります。</p>
<h2>参考資料</h2>
<ul>
<li><a href="https://docs.unity3d.com/Manual/ScriptingSection.html" rel="nofollow" target="_blank">Unity公式マニュアル - スクリプト</a></li>
</ul>
<hr>
<p><em>Unity 2020.3以上を対象としています。より古いバージョンでも基本的な概念は適用できますが、一部のC#機能は利用できない場合があります。</em></p></div><div class="mt-16 pt-10 border-t border-gray-200 dark:border-gray-800"><p class="text-sm font-semibold text-gray-500 dark:text-gray-400 mb-4">タグ</p><div class="flex flex-wrap gap-2.5"><a class="inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm" href="/tags/Unity">Unity</a><a class="inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm" href="/tags/C#">C#</a><a class="inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm" href="/tags/デザインパターン">デザインパターン</a><a class="inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm" href="/tags/シングルトン">シングルトン</a><a class="inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm" href="/tags/ゲーム開発">ゲーム開発</a></div></div></div></article><script src="/_next/static/chunks/webpack-bc770cab82f23445.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/40e00024f5837e45-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n2:HL[\"/_next/static/media/8b506003a59c61f9-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/media/e1217b6673f6c7e5-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n4:HL[\"/_next/static/media/e1a9950d37b1ef3e-s.p.ttf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/ttf\"}]\n5:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n6:HL[\"/_next/static/css/3add334ee59f67ac.css\",\"style\"]\n7:HL[\"/_next/static/css/cec3dd424af6abe7.css\",\"style\"]\n8:HL[\"/_next/static/css/31924b81bd2c71c2.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"9:I[2846,[],\"\"]\nc:I[4707,[],\"\"]\ne:I[6423,[],\"\"]\nf:I[4888,[\"972\",\"static/chunks/972-f241a8fd644428c6.js\",\"70\",\"static/chunks/70-f52c2ad284c6cd86.js\",\"185\",\"static/chunks/app/layout-97d049cf0fc78146.js\"],\"GoogleAnalytics\"]\n10:I[6806,[\"972\",\"static/chunks/972-f241a8fd644428c6.js\",\"70\",\"static/chunks/70-f52c2ad284c6cd86.js\",\"185\",\"static/chunks/app/layout-97d049cf0fc78146.js\"],\"default\"]\n11:I[7213,[\"972\",\"static/chunks/972-f241a8fd644428c6.js\",\"70\",\"static/chunks/70-f52c2ad284c6cd86.js\",\"185\",\"static/chunks/app/layout-97d049cf0fc78146.js\"],\"default\"]\n12:I[2972,[\"972\",\"static/chunks/972-f241a8fd644428c6.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-acd6669982df1354.js\"],\"\"]\n13:I[5878,[\"972\",\"static/chunks/972-f241a8fd644428c6.js\",\"70\",\"static/chunks/70-f52c2ad284c6cd86.js\",\"185\",\"static/chunks/app/layout-97d049cf0fc78146.js\"],\"Image\"]\n14:I[2374,[\"972\",\"static/chunks/972-f241a8fd644428c6.js\",\"70\",\"static/chunks/70-f52c2ad284c6cd86.js\",\"185\",\"static/chunks/app/layout-97d049cf0fc78146.js\"],\"default\"]\n16:I[1060,[],\"\"]\nd:[\"slug\",\"unity_20250330\",\"d\"]\n17:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L9\",null,{\"buildId\":\"0oJGNGFmzz_LorUWHIimP\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"posts\",\"unity_20250330\"],\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"unity_20250330\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"unity_20250330\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"unity_20250330\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$La\",\"$Lb\",null],null],null]},[null,[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$d\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3add334ee59f67ac.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/cec3dd424af6abe7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/31924b81bd2c71c2.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"jp\",\"className\":\"__variable_f367f3 __variable_8c8862 __variable_6beb74 __variable_b784c9 __variable_d575de\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"(function(){try{var s=localStorage.getItem('darkMode');var p=window.matchMedia('(prefers-color-scheme: dark)').matches;if(s!==null?s==='true':p){document.documentElement.classList.add('dark');}}catch(e){}})();\"}}],[\"$\",\"$Lf\",null,{\"gaId\":\"G-FWRP8962MB\"}]]}],[\"$\",\"body\",null,{\"className\":\"__className_f367f3\",\"children\":[\"$\",\"$L10\",null,{\"children\":[[\"$\",\"header\",null,{\"children\":[\"$\",\"$L11\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"fixed top-0 left-0 w-full z-50 bg-green-700 dark:bg-gray-900 shadow-md border-b border-green-600/50 dark:border-gray-800\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-7xl mx-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between px-6 md:px-8 h-20 md:h-24\",\"children\":[[\"$\",\"$L12\",null,{\"href\":\"/\",\"className\":\"group flex items-center gap-3 transition-opacity hover:opacity-80\",\"children\":[[\"$\",\"$L13\",null,{\"alt\":\"Maemaemae\",\"src\":\"/header.jpg\",\"width\":44,\"height\":44,\"className\":\"rounded-full object-cover ring-2 ring-white/20 group-hover:ring-white/40 transition-all\"}],[\"$\",\"span\",null,{\"className\":\"text-xl md:text-2xl font-katyou text-[#fffef9] tracking-wide\",\"children\":\"Maemaemae\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://x.com/maemaemae_rm\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"p-2.5 rounded-full hover:bg-white/10 transition-colors\",\"aria-label\":\"X (Twitter)\",\"children\":[\"$\",\"$L13\",null,{\"src\":\"/x-logo-white.png\",\"width\":24,\"height\":24,\"alt\":\"\"}]}],[\"$\",\"$L14\",null,{}]]}]]}]}]}]}]}],[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]]}]}]]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L15\"],\"globalErrorComponent\":\"$16\",\"missingSlots\":\"$W17\"}]\n"])</script><script>self.__next_f.push([1,"19:I[7426,[\"972\",\"static/chunks/972-f241a8fd644428c6.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-acd6669982df1354.js\"],\"default\"]\n18:T143ed,"])</script><script>self.__next_f.push([1,"\u003cp\u003eUnityプロジェクトでは、ゲーム状態の管理、オーディオの制御、入力処理など、アプリケーション全体で一貫して利用できる機能が必要になります。このような場合に役立つのが「シングルトンパターン」です。この記事では、Unityでのシングルトンパターンの実装方法、よくあるエラーとその対策、実践的な使用例について解説します。\u003c/p\u003e\n\u003ch2\u003eシングルトンパターンとは\u003c/h2\u003e\n\u003cp\u003eシングルトンパターンは、クラスのインスタンスが必ず1つだけ存在することを保証し、そのインスタンスへのグローバルなアクセスポイントを提供するデザインパターンです。ゲーム開発においては、以下のような場面で特に有用です：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eゲーム全体の状態管理（GameManager）\u003c/li\u003e\n\u003cli\u003eオーディオ管理（AudioManager）\u003c/li\u003e\n\u003cli\u003e入力制御（InputManager）\u003c/li\u003e\n\u003cli\u003eセーブデータ管理（SaveManager）\u003c/li\u003e\n\u003cli\u003eUIシステム（UIManager）\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e基本的なシングルトン実装\u003c/h2\u003e\n\u003cp\u003eUnityでの最も基本的なシングルトン実装は以下の通りです：\u003c/p\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eusing\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGameManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 静的インスタンス参照\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGameManager\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 公開アクセスポイント\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eGameManager\u003c/span\u003e Instance\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                Debug\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eLogError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"GameManager is not available!\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// シングルトンの初期化\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            _instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDontDestroyOnLoad\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// シーン遷移時も破棄しない\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token comment\"\u003e// 既に存在する場合は重複を破棄\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDestroy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこの基本実装では：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e静的変数 \u003ccode\u003e_instance\u003c/code\u003e がクラスのインスタンスを保持\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eInstance\u003c/code\u003e プロパティが外部からのアクセスポイントになる\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAwake()\u003c/code\u003e メソッドでインスタンスの一意性を確保\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDontDestroyOnLoad()\u003c/code\u003e でシーン遷移時もインスタンスを維持\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e発展的なシングルトン実装\u003c/h2\u003e\n\u003ch3\u003e自動生成機能を持つシングルトン\u003c/h3\u003e\n\u003cp\u003eシングルトンが存在しない場合に自動的に生成する機能を追加した実装です：\u003c/p\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eusing\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAudioManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAudioManager\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eAudioManager\u003c/span\u003e Instance\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token comment\"\u003e// インスタンスがなければ自動生成\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token class-name\"\u003eGameObject\u003c/span\u003e go \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token constructor-invocation class-name\"\u003eGameObject\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"AudioManager\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                _instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e go\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eAddComponent\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eAudioManager\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token function\"\u003eDontDestroyOnLoad\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ego\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            _instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDontDestroyOnLoad\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDestroy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// 初期化処理...\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e汎用的なシングルトン基底クラス\u003c/h3\u003e\n\u003cp\u003e複数のマネージャークラスで再利用できるジェネリックな基底クラスを作成することで、コードの重複を避けられます：\u003c/p\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003eusing\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eUnityEngine\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eabstract\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSingleton\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ewhere\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eT\u003c/span\u003e Instance\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token comment\"\u003e// シーン内のインスタンスを検索\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                _instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eFindObjectOfType\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token comment\"\u003e// 見つからなければ新規作成\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                    \u003cspan class=\"token class-name\"\u003eGameObject\u003c/span\u003e go \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token constructor-invocation class-name\"\u003eGameObject\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003etypeof\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token type-expression class-name\"\u003eT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                    _instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e go\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eAddComponent\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token function\"\u003eDontDestroyOnLoad\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprotected\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evirtual\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            _instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDontDestroyOnLoad\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDestroy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// 使用例\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUIManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eSingleton\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eUIManager\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// UIManagerの固有メソッドや変数\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eShowMainMenu\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        Debug\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eLog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"メインメニューを表示\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprotected\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ebase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// UIManagerの初期化処理\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eよくあるNullReferenceExceptionとその対策\u003c/h2\u003e\n\u003cp\u003eシングルトンパターンを使用する際によく発生するのが \u003ccode\u003eNullReferenceException\u003c/code\u003e です。特に以下のケースに注意が必要です：\u003c/p\u003e\n\u003ch3\u003e1. 初期化タイミングの問題\u003c/h3\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// エラーの例\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eStart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// GameManagerが初期化される前にアクセスするとエラー\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    GameManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eInstance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eStartGame\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// 安全な実装\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eStart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eGameManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eInstance \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        GameManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eInstance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eStartGame\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        Debug\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eLogWarning\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"GameManagerが初期化されていません\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// 代替処理...\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e2. シングルトン間の依存関係によるエラー\u003c/h3\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// 問題のあるコード\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSaveManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSaveManager\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eSaveManager\u003c/span\u003e Instance \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        _instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// GameManagerが初期化されていない可能性がある\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        GameManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eInstance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eRegisterSaveSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// 改善策\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSaveManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSaveManager\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eSaveManager\u003c/span\u003e Instance \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        _instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token function\"\u003eDontDestroyOnLoad\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eStart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// Startメソッドは全てのAwakeの後に呼ばれる\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eGameManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eInstance \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            GameManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eInstance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eRegisterSaveSystem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e3. シーン遷移時の問題\u003c/h3\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// よくある間違い\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eInputManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eInputManager\u003c/span\u003e Instance \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eInstance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            Instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token comment\"\u003e// DontDestroyOnLoadを忘れると\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token comment\"\u003e// シーン遷移時にInstanceがnullになる\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDestroy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// 正しい実装\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eInputManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eInputManager\u003c/span\u003e Instance \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eInstance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            Instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDontDestroyOnLoad\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 重要\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDestroy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egameObject\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e実践的なエラー対策テクニック\u003c/h2\u003e\n\u003ch3\u003eシングルトン存在チェックメソッド\u003c/h3\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGameManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eGameManager\u003c/span\u003e Instance \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// シングルトンの存在確認メソッド\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003ebool\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eHasInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Instance \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 安全にアクセスするメソッド\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eGameManager\u003c/span\u003e \u003cspan class=\"token function\"\u003eGetSafeInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eInstance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            Debug\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eLogWarning\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"GameManagerのインスタンスが利用できません\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token comment\"\u003e// 必要に応じて新規作成\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token comment\"\u003e// 使用例\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eDoSomething\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eGameManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eHasInstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        GameManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eInstance\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eProcessAction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e初期化順序の制御\u003c/h3\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGameInitializer\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// シングルトンの初期化順序を明示的に制御\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eCreateSingleton\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eGameManager\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eCreateSingleton\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eAudioManager\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eCreateSingleton\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eUIManager\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eCreateSingleton\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eSaveManager\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eCreateSingleton\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ewhere\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eT\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eFindObjectOfType\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token class-name\"\u003eGameObject\u003c/span\u003e go \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token constructor-invocation class-name\"\u003eGameObject\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003etypeof\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token type-expression class-name\"\u003eT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eName\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            go\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eAddComponent\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eT\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token function\"\u003eDontDestroyOnLoad\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ego\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eLazy Initialization（遅延初期化）の安全な実装\u003c/h3\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eResourceManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eMonoBehaviour\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eResourceManager\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token keyword\"\u003eobject\u003c/span\u003e\u003c/span\u003e _lock \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token constructor-invocation class-name\"\u003e\u003cspan class=\"token keyword\"\u003eobject\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token keyword\"\u003ebool\u003c/span\u003e\u003c/span\u003e _isInitializing \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eResourceManager\u003c/span\u003e Instance\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!\u003c/span\u003e_isInitializing\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token keyword\"\u003elock\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_lock\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_instance \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!\u003c/span\u003e_isInitializing\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                        _isInitializing \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                        \u003cspan class=\"token class-name\"\u003eGameObject\u003c/span\u003e go \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token constructor-invocation class-name\"\u003eGameObject\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"ResourceManager\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                        _instance \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e go\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eAddComponent\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eResourceManager\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                        \u003cspan class=\"token function\"\u003eDontDestroyOnLoad\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ego\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                        _isInitializing \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e                \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e _instance\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e実用的なシングルトン実装例\u003c/h2\u003e\n\u003ch3\u003eゲームマネージャー\u003c/h3\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGameManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eSingleton\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eGameManager\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// ゲーム状態\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eenum\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGameState\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e MainMenu\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Playing\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Paused\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e GameOver \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGameState\u003c/span\u003e _currentState\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 公開プロパティ\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003eGameState\u003c/span\u003e CurrentState\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e _currentState\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eset\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            _currentState \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evalue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            OnGameStateChanged\u003cspan class=\"token punctuation\"\u003e?.\u003c/span\u003e\u003cspan class=\"token function\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_currentState\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// ゲーム状態変更イベント\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eevent\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSystem\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eAction\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eGameState\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e OnGameStateChanged\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// スコア管理\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e\u003c/span\u003e _score\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e\u003c/span\u003e Score\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e _score\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eset\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            _score \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evalue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            OnScoreChanged\u003cspan class=\"token punctuation\"\u003e?.\u003c/span\u003e\u003cspan class=\"token function\"\u003eInvoke\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_score\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eevent\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSystem\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eAction\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e OnScoreChanged\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// ゲーム開始\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eStartGame\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        Score \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        CurrentState \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e GameState\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ePlaying\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        Debug\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eLog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"ゲーム開始\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// ゲーム一時停止\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003ePauseGame\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eCurrentState \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e GameState\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ePlaying\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            CurrentState \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e GameState\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ePaused\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            Time\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etimeScale \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0f\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eCurrentState \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e GameState\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ePaused\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            CurrentState \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e GameState\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ePlaying\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            Time\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etimeScale \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1f\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// ゲームオーバー\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eGameOver\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        CurrentState \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e GameState\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eGameOver\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        Debug\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eLog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token interpolation-string\"\u003e\u003cspan class=\"token string\"\u003e$\"ゲームオーバー、最終スコア: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token expression language-csharp\"\u003eScore\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eオーディオマネージャー\u003c/h3\u003e\n\u003cpre class=\"language-csharp\"\u003e\u003ccode class=\"language-csharp code-highlight\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAudioManager\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token type-list\"\u003e\u003cspan class=\"token class-name\"\u003eSingleton\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eAudioManager\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 音楽再生用\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token attribute\"\u003e\u003cspan class=\"token class-name\"\u003eSerializeField\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAudioSource\u003c/span\u003e musicSource\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 効果音再生用\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token attribute\"\u003e\u003cspan class=\"token class-name\"\u003eSerializeField\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAudioSource\u003c/span\u003e sfxSource\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 音楽クリップディクショナリ\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDictionary\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e AudioClip\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e musicClips \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token constructor-invocation class-name\"\u003eDictionary\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e AudioClip\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 効果音クリップディクショナリ\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDictionary\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e AudioClip\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e sfxClips \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token constructor-invocation class-name\"\u003eDictionary\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e AudioClip\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprotected\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003ebase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eAwake\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// AudioSourceがない場合は追加\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emusicSource \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            musicSource \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e gameObject\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eAddComponent\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eAudioSource\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            musicSource\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eloop \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esfxSource \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            sfxSource \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e gameObject\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eAddComponent\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eAudioSource\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// 音楽と効果音を読み込む\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token function\"\u003eLoadAudioClips\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eLoadAudioClips\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// Resources/Audio/Musicフォルダから全ての音楽を読み込む\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token class-name\"\u003eAudioClip\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e loadedMusic \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Resources\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eLoadAll\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eAudioClip\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Audio/Music\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eforeach\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eAudioClip\u003c/span\u003e clip \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e loadedMusic\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            musicClips\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eAdd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclip\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e clip\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token comment\"\u003e// Resources/Audio/SFXフォルダから全ての効果音を読み込む\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token class-name\"\u003eAudioClip\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003c/span\u003e loadedSFX \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Resources\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token generic-method\"\u003e\u003cspan class=\"token function\"\u003eLoadAll\u003c/span\u003e\u003cspan class=\"token generic class-name\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eAudioClip\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Audio/SFX\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eforeach\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eAudioClip\u003c/span\u003e clip \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e loadedSFX\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            sfxClips\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eAdd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclip\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e clip\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        Debug\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eLog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token interpolation-string\"\u003e\u003cspan class=\"token string\"\u003e$\"読み込み完了: 音楽 \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token expression language-csharp\"\u003emusicClips\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eCount\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e個, 効果音 \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token expression language-csharp\"\u003esfxClips\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eCount\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e個\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 音楽を再生\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003ePlayMusic\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token keyword\"\u003estring\u003c/span\u003e\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emusicClips\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eTryGetValue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eout\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAudioClip\u003c/span\u003e clip\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            musicSource\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eclip \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e clip\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            musicSource\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ePlay\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            Debug\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eLogWarning\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token interpolation-string\"\u003e\u003cspan class=\"token string\"\u003e$\"音楽 '\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token expression language-csharp\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e' が見つかりません\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 効果音を再生\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003ePlaySFX\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token keyword\"\u003estring\u003c/span\u003e\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esfxClips\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eTryGetValue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eout\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAudioClip\u003c/span\u003e clip\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            sfxSource\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ePlayOneShot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eclip\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e            Debug\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eLogWarning\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token interpolation-string\"\u003e\u003cspan class=\"token string\"\u003e$\"効果音 '\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token expression language-csharp\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e' が見つかりません\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token comment\"\u003e// 音量設定\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eSetMusicVolume\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token keyword\"\u003efloat\u003c/span\u003e\u003c/span\u003e volume\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        musicSource\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evolume \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Mathf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eClamp01\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evolume\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token return-type class-name\"\u003e\u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token function\"\u003eSetSFXVolume\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token keyword\"\u003efloat\u003c/span\u003e\u003c/span\u003e volume\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e        sfxSource\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evolume \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Mathf\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eClamp01\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evolume\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\r\n\u003c/span\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eシングルトンパターンの注意点とベストプラクティス\u003c/h2\u003e\n\u003ch3\u003e使用する際の注意点\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e過剰な使用を避ける\u003c/strong\u003e: すべてのクラスをシングルトンにする誘惑に負けないようにしましょう。必要な場面でのみ使用しましょう。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eテスト難易度\u003c/strong\u003e: シングルトンはユニットテストを難しくします。テスト可能性を高めるために依存性注入などの手法を検討しましょう。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e依存関係\u003c/strong\u003e: シングルトン間の循環依存を避け、明確な初期化順序を設定しましょう。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eスレッドセーフティ\u003c/strong\u003e: マルチスレッド環境では、適切な同期機構（lockなど）を使用しましょう。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3\u003eベストプラクティス\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e専用のブートストラップシーン\u003c/strong\u003e: すべてのシングルトンを初期化するための専用シーンを作成しましょう。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e初期化順序の制御\u003c/strong\u003e: 依存関係のあるシングルトン間の初期化順序を明示的に制御しましょう。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eシングルトン間の通信方法\u003c/strong\u003e: イベントベースの通信を採用して、シングルトン間の結合度を下げましょう。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eNullReferenceExceptionの対策\u003c/strong\u003e: 常にnullチェックを行い、フォールバックや自動生成機能を実装しましょう。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eドキュメント化\u003c/strong\u003e: プロジェクト内のシングルトンの役割と責任範囲を明確に文書化しましょう。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cp\u003eUnityにおけるシングルトンパターンは、ゲーム全体で一貫して利用される機能を提供するための強力な手法です。この記事で紹介した実装方法とエラー対策テクニックを活用して、より堅牢なゲームアプリケーションを構築してください。\u003c/p\u003e\n\u003cp\u003eただし、シングルトンパターンの使用は適材適所で行い、過剰な依存を作り出さないよう注意しましょう。適切に実装されたシングルトンは、コードの可読性と保守性を高め、開発効率を向上させる強力なツールとなります。\u003c/p\u003e\n\u003ch2\u003e参考資料\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.unity3d.com/Manual/ScriptingSection.html\" rel=\"nofollow\" target=\"_blank\"\u003eUnity公式マニュアル - スクリプト\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cem\u003eUnity 2020.3以上を対象としています。より古いバージョンでも基本的な概念は適用できますが、一部のC#機能は利用できない場合があります。\u003c/em\u003e\u003c/p\u003e"])</script><script>self.__next_f.push([1,"b:[\"$\",\"article\",null,{\"className\":\"min-h-screen\",\"children\":[[\"$\",\"div\",null,{\"className\":\"bg-gradient-to-b from-green-50/60 to-transparent dark:from-gray-900 dark:to-transparent\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-4xl mx-auto px-6 md:px-8 pt-28 md:pt-32 pb-10 md:pb-14\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"font-katyou text-4xl md:text-5xl lg:text-6xl text-gray-900 dark:text-white leading-tight mb-6\",\"children\":\"Unityのシングルトンパターン\"}],[\"$\",\"time\",null,{\"className\":\"text-base font-medium text-gray-600 dark:text-gray-400\",\"children\":\"2025-03-30\"}]]}]}],[\"$\",\"div\",null,{\"className\":\"max-w-4xl mx-auto px-6 md:px-8 pb-16 md:pb-24\",\"children\":[[\"$\",\"div\",null,{\"id\":\"post-content\",\"className\":\"prose prose-lg dark:prose-invert max-w-none prose-headings:font-katyou prose-headings:tracking-tight prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-6 prose-h3:text-2xl prose-h3:mt-10 prose-h3:mb-5 prose-h4:text-xl prose-h4:mt-8 prose-h4:mb-4 prose-p:leading-relaxed prose-p:mb-6 prose-li:my-2 prose-a:text-green-600 prose-a:no-underline prose-a:font-medium hover:prose-a:text-green-700 hover:prose-a:underline dark:prose-a:text-green-400 dark:hover:prose-a:text-green-300 prose-code:text-green-700 prose-code:bg-green-50 dark:prose-code:text-green-300 dark:prose-code:bg-green-900/20 prose-pre:bg-gray-900 dark:prose-pre:bg-gray-950 prose-img:rounded-lg prose-img:shadow-md prose-hr:my-12 prose-hr:border-gray-300 dark:prose-hr:border-gray-700 border-t border-gray-200 dark:border-gray-800 pt-8\",\"dangerouslySetInnerHTML\":{\"__html\":\"$18\"}}],[\"$\",\"$L19\",null,{}],[\"$\",\"div\",null,{\"className\":\"mt-16 pt-10 border-t border-gray-200 dark:border-gray-800\",\"children\":[[\"$\",\"p\",null,{\"className\":\"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-4\",\"children\":\"タグ\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-2.5\",\"children\":[[\"$\",\"$L12\",\"Unity\",{\"href\":\"/tags/Unity\",\"className\":\"inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm\",\"children\":\"Unity\"}],[\"$\",\"$L12\",\"C#\",{\"href\":\"/tags/C#\",\"className\":\"inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm\",\"children\":\"C#\"}],[\"$\",\"$L12\",\"デザインパターン\",{\"href\":\"/tags/デザインパターン\",\"className\":\"inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm\",\"children\":\"デザインパターン\"}],[\"$\",\"$L12\",\"シングルトン\",{\"href\":\"/tags/シングルトン\",\"className\":\"inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm\",\"children\":\"シングルトン\"}],[\"$\",\"$L12\",\"ゲーム開発\",{\"href\":\"/tags/ゲーム開発\",\"className\":\"inline-flex items-center px-4 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50 transition-colors duration-200 shadow-sm\",\"children\":\"ゲーム開発\"}]]}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"15:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Unityのシングルトンパターン | ブログタイトル\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Unity開発者のための効率的なシングルトンパターンの実装方法と実践的なエラー対策\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Unityのシングルトンパターン\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"Unity開発者のための効率的なシングルトンパターンの実装方法と実践的なエラー対策\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:url\",\"content\":\"https://maemaemae.blog/posts/unity_20250330\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:image\",\"content\":\"https://maemaemae.blog/images/unity-singleton.jpg\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"9\",{\"property\":\"article:published_time\",\"content\":\"2025-03-30\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:title\",\"content\":\"Unityのシングルトンパターン\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:description\",\"content\":\"Unity開発者のための効率的なシングルトンパターンの実装方法と実践的なエラー対策\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:image\",\"content\":\"https://maemaemae.blog/images/unity-singleton.jpg\"}],[\"$\",\"link\",\"14\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"15\",{\"name\":\"next-size-adjust\"}]]\na:null\n"])</script></body></html>